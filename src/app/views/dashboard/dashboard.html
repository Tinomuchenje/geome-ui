<h2 class="page-header">Project Overview</h2>
<p class="text-center">In this system an “Expedition” includes the metadata (and Sanger sequences if applicable) from a single
  dataset. The GUID is the globally unique persistent identifier for the expedition and should be acknowledged
  in the original publication of the dataset and accredited when any part of that dataset is downloaded
  for reuse.</p>

<div layout="row" layout-fill layout-sm="column" ng-show="$ctrl.loading" layout-align="center center">
  <md-progress-circular md-mode="indeterminate"></md-progress-circular>
</div>

<!-- <table class="table table-hover table-condensed text-center" ng-show="!$ctrl.loading"> -->
<table class="table table-hover table-condensed text-center" ng-show="$ctrl.displayResults.length > 0">
  <thead>
    <th class="text-center">Expedition Title</th>
    <th class="text-center">Samples</thcl>
      <th class="text-center">Fasta Sequences</th>
      <th class="text-center">Fastq Metadata</th>
      <th class="text-center">GUID</th>
      <th></th>
  </thead>

  <tbody>
    <tr ng-repeat="expedition in $ctrl.displayResults track by expedition.expeditionCode">
      <td>{{ expedition.expeditionTitle}}</td>
      <td>{{ expedition.ResourceCount}}</td>
      <td>{{ expedition.fastaSequenceCount}}</td>
      <td>{{ expedition.fastqMetadataCount}}</td>
      <td ng-show="expedition.expeditionIdentifier">
        <a href="https://n2t.net/{{expedition.expeditionIdentifier}}">https://n2t.net/{{ expedition.expeditionIdentifier}}
        </a>
      </td>
      <td ng-show="!expedition.expeditionIdentifier"></td>
      <td>
        <div class="btn-group">
          <button type="button" class="btn btn-primary btn-xs dropdown-toggle" data-toggle="dropdown">Download
            <span class="caret"></span>
          </button>
          <ul class="dropdown-menu">
            <li>
              <a href="#" ng-click="$ctrl.downloadCsv(expedition.expeditionCode)">CSV</a>
            </li>
            <li>
              <a href="#" ng-show="expedition.fastaSequenceCount > 0" ng-click="$ctrl.downloadFasta(expedition.expeditionCode)">Fasta</a>
            </li>
            <li>
              <a href="#" ng-show="expedition.fastqMetadataCount > 0" ng-click="$ctrl.downloadFastq(expedition.expeditionCode)">Fastq</a>
            </li>
          </ul>
        </div>
      </td>
    </tr>
  </tbody>
</table>

<uib-pagination total-items="$ctrl.totalItems" ng-model="$ctrl.currentPage" ng-change="$ctrl.pageChanged()"
  items-per-page="$ctrl.itemsPerPage"></uib-pagination>
<div ng-show="$ctrl.results.showValidationMessages">
  <!-- worksheet validation messages -->
  <div>
    <div
      ng-repeat="entityResults in $ctrl.results.validation.messages track by entityResults.entity"
    >
      <div class="tab-content" ng-show="entityResults.errors.length > 0">
        <p>
          <b
            >Validation results on {{ entityResults.sheetName }} worksheet, for entity: {{
            entityResults.entity }}.
          </b>
          <br />
          <b>1 or more errors found. Must fix to continue. Click each message for details</b>
        </p>
      </div>
      <div
        class="tab-content"
        ng-show="entityResults.errors.length === 0 && entityResults.warnings.length > 0"
      >
        <p>
          <b
            >Validation results on {{ entityResults.sheetName }} worksheet, for entity: {{
            entityResults.entity }}.
          </b>
          <br />
          <b>1 or more warnings found. Click each message for details</b>
        </p>
      </div>

      <!--we use template-url here to override the default uib-accordian template-->
      <uib-accordion
        close-others="false"
        template-url="validation-result-messages.html"
      ></uib-accordion>
    </div>
  </div>
</div>

<div ng-show="$ctrl.results.showUploadMessages">
  <p>{{$ctrl.results.uploadMessage | trusted_html}}</p>
</div>
<div ng-show="$ctrl.results.validation.exception">
  <p>{{$ctrl.results.validation.exception | trusted_html}}</p>
</div>
<div ng-show="$ctrl.results.showSuccessMessages">
  <p>{{$ctrl.results.successMessage | trusted_html}}</p>
</div>

<script type="text/ng-template" id="validation-result-messages.html">
  <div role="tablist">
      <fims-validation-messages
              messages="entityResults.errors"
              error="true">
      </fims-validation-messages>

      <fims-validation-messages
              messages="entityResults.warnings"
              error="false">
      </fims-validation-messages>
  </div>
</script>

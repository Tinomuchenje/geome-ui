<li
  class="settings-list-item"
  uib-popover-template="'editEntityPopover.html'"
  popover-is-open="$ctrl.editing"
  popover-placement="auto bottom"
  popover-trigger="'none'"
  popover-class="edit-popover"
>
  <div class="row-actions" ng-if="$ctrl.canEdit">
    <a href="#"><i class="fa fa-arrows fa-fw"></i></a>
    <a href="#" ng-click="$ctrl.onToggleEdit()"><i class="fa fa-pencil fa-fw"></i></a>
  </div>

  <div class="info">
    <div class="row">
      <div layout="row" class="col-xs-12">
        <div flex>
          <a
            ui-sref="project-config.entities.detail({ alias: $ctrl.entity.conceptAlias, entity: $ctrl.entity })"
            href
            class="title"
          >
            {{ $ctrl.entity.conceptAlias }}
          </a>
        </div>
        <div flex flex-gt-sm="25" flex-gt-md="35">
          <ul class="list-unstyled">
            <li>
              <a
                href
                ui-sref=".detail.attributes({ alias: $ctrl.entity.conceptAlias, entity: $ctrl.entity })"
              >
                <span class="badge">{{ $ctrl.entity.attributes.length }}</span>
                Attributes
              </a>
            </li>
            <li>
              <a
                href
                ui-sref=".detail.rules({ alias: $ctrl.entity.conceptAlias, entity: $ctrl.entity })"
              >
                <span class="badge">{{ $ctrl.entity.rules.length }}</span> Rules
              </a>
            </li>
          </ul>
        </div>
      </div>
      <div class="col-xs-12">
        <ul class="list-inline metadata" ng-click="$ctrl.onToggleEdit()">
          <li ng-show="$ctrl.entity.worksheet">
            <strong>worksheet:</strong> {{ $ctrl.entity.worksheet }}
          </li>
          <li ng-show="$ctrl.entity.parentEntity">
            <strong>parentEntity:</strong> {{ $ctrl.entity.parentEntity }}
          </li>
          <li><strong>uniqueAcrossProject:</strong> {{ $ctrl.entity.uniqueAcrossProject }}</li>
        </ul>
      </div>
    </div>
  </div>

  <script type="text/ng-template" id="editEntityPopover.html">
    <fims-edit-entity
        config="$ctrl.config"
        entity="$ctrl.entity"
        on-update="$ctrl.handleOnUpdate(entity)"
        on-close="$ctrl.onToggleEdit()">
    </fims-edit-entity>
  </script>
</li>

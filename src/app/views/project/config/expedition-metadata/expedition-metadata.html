<div class="settings">

    <div class="row back">
        <div class="col-xs-12">
            <a href ui-sref="project.config.entities">
                <i class="fa fa-chevron-left"></i>
                back</a>
        </div>
    </div>

    <table class="table attributes-table">
        <thead>
            <th></th>
            <th>Name</th>
            <th>Required</th>
        </thead>

        <tbody>
            <tr ng-repeat="prop in $ctrl.properties track by $index"
                id="prop_{{ $index }}" 
                uib-popover-template="'editProp.html'"
                popover-is-open="$index === $ctrl.editProp"
                popover-placement="auto bottom" 
                popover-trigger="none"
                popover-class="edit-popover">
                <td class="row-actions">
                    <a href="#" ng-click="$ctrl.handleToggleEdit($index)">
                        <i class="fa fa-pencil fa-fw"></i>
                    </a>
                    <a href="#" class="delete" ng-click="$ctrl.handleOnDelete($index)">
                        <i class="fa fa-trash text-danger fa-fw"></i>
                    </a>
                </td>
            <td ng-click="$ctrl.handleToggleEdit($index)">{{ prop.name }}</td>
                <td ng-click="$ctrl.handleToggleEdit($index)">{{ prop.required }}</td>
            </tr>
        </tbody>
    </table>
</div>

<script type="text/ng-template" id="editProp.html">
    <fims-edit-prop
            prop="prop"
            properties="$ctrl.properties"
            on-update="$ctrl.handleOnUpdate($index, prop)"
            on-close="$ctrl.handleToggleEdit($index)">
    </fims-edit-prop>
</script>
